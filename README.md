# 주문 관리 API 서버

### 버전 정보

- Spring Boot : 3.1.0
    - [Dependency 버전](https://docs.spring.io/spring-boot/docs/current/reference/html/dependency-versions.html#appendix.dependency-versions)
- Java : 17

### 실행 환경

- H2 메모리 DB 활용

### API 요구사항 분석

구체적인 요구사항이 없어서, <u>임의로 요구사항을 설정</u>했습니다.

- 주문 접수란?
    - 사용자가 특정 상품들을 담아서 주문(요청)하는 것을 `주문 접수`로 간주한다.
- 주문 완료란?
    - 사용자가 주문한 것들을 결제하는 것을 `주문 완료`로 간주한다.
- 인증 없이 개발하기 위해, `주문 접수처리`를 제외한 나머지 API에서 사용자에 대한 정보를 받지 않습니다.
    - 주문자 정보를 확인하기 위해 `주문 접수처리`에선 사용자 ID를 받습니다.
    - 누구나 특정 주문에 대해 완료 처리를 수행할 수 있다.
    - 누구나 모든 주문 목록을 조회할 수 있다.
- 주문
    - 주문할 상품 정보, 주문 상태, 주문 일시, 주문자 정보, 배송 정보를 포함한다.
    - 회원(사용자)만 주문이 가능하다.
    - 받는이에 대한 정보는 회원과 관계없이, 따로 주문에 종속된 정보이다.
    - 결제 금액에 대한 정보를 확인할 수 있다.
    - 배송비와 할인이 있다.
        - 배송비 : 서울이면 0원. 나머지 지역은 3,000원
        - 할인 : 전체 주문 상품 수량이 5개 이상이면 10% 할인
    - 주문 상태
        - `접수`, `완료`
    - 주문자 정보
        - `이름`, `전화번호`
    - 받는이 정보
        - `이름`, `주소`, `전화번호`, `따로 전달할 메세지`
    - 주문 상품
        - `상품`, `개수`
        - 상품
            - `이름`, `가격`
- 결제
    - 결제 수단에 대한 정보를 가지고 있다.
    - 결제 수단 별로 별도의 API를 만들지 않고, 하나의 API로 모든 결제를 진행하는 걸로 가정한다.
        - 결제는 외부 서비스를 이용하며, 항상 성공하는 것으로 가정한다.
    - 결제 수단 정보
        - 수단 : `카드결제`, `간편결제`, `가상계좌`, `휴대폰결제`
        - 수단 데이터 (JSON)
            - 각 수단 별로 필요한 데이터
                - ex) 카드 결제라면 카드 번호, cvc 등의 데이터
            - 여기선 따로 각 수단 별 데이터들을 정의하지 않고, `"{}"`로 통일합니다.

| API 이름  | 요구사항                                                                                                                                                            | Request Data                                               | Response Data                                                       | Endpoint                           |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|---------------------------------------------------------------------|------------------------------------|
| 주문 접수처리 | - 사용자가 특정 상품들을 담아서 주문한다.<br/>- 주문이 접수된 이후부터 조회가 가능하다.                                                                                                           | 주문자 id,<br/>상품 목록(상품 id & 수량)<br/>배송 정보(이름, 주소, 전화번호, 메세지) | 주문 id                                                               | [POST] /orders                     |
| 주문 완료처리 | - 특정 주문에 대한 결제를 진행한다.                                                                                                                                           | 결제 수단                                                      |                                                                     | [POST] /orders/{order-id}/complete |
| 단일 주문조회 | - 하나의 주문에 대한 정보를 조회한다.                                                                                                                                          |                                                            | 주문 번호, 주문 상태, 주문 상품,<br/>결제 정보(금액,상태,수단), 주문 일시,<br/>주문자 정보, 받는이 정보 | [GET] /orders/{order-id}           |
| 주문 목록조회 | - 모든 주문 목록을 조회한다.<br/>- 페이지네이션을 적용한다.<br/>- 정렬 조건 : 주문 일시, 주문 상태, 결제 금액<br/>- 필터 조건 : 주문 상태<br/>- 대표 상품 이름은 첫번째 상품 이름에<br/>나머지 상품의 개수를 합쳐 만든다.<br/>ex) 선풍기 외 3개 | 페이지 번호, 목록 개수,<br/>정렬 조건, 필터 조건                            | 대표 상품 이름, 주문 상태<br/>결제 금액, 주문 일시                                    | [GET] /orders                      |
